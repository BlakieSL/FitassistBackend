name: Code Formatting Check

on:
  push:
    branches: [ "*" ]
  pull_request:
    branches: [ "*" ]

jobs:
  format-check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Set up JDK 25
      uses: actions/setup-java@v4
      with:
        java-version: '25'
        distribution: 'temurin'

    - name: Check code formatting
      run: ./gradlew checkFormat
      env:
        TESTCONTAINERS_RYUK_DISABLED: "true"

    - name: Format check results
      if: failure()
      run: |
        echo "Code formatting check failed!To fix formatting issues, run: ./gradlew format"
